window.document.oncontextmenu=function(e){return!!e.ctrlKey||(!!/android|Android|webOS|BlackBerry/i.test(navigator.userAgent)||("turnOff"===localStorage.getItem("SAOSwitch")||popMenu(e)))};var dvMEnu=document.getElementById("SAO-menu"),xMenu=0,yMenu=0,lMenu=0,tMenu=0,isDownMEnu=!1;function SAOclose(){document.getElementById("SAO-back").style.display="none"}function SAOinit(){var e=document.querySelectorAll(".active");if(e)for(i=0;i<e.length;i++)e[i].classList.remove("active")}function Menuinit(e){var t=e.querySelectorAll(".active");if(t)for(i=0;i<t.length;i++)t[i].classList.remove("active")}function linkStart(e){e.includes("https://")||e.includes("http://")?window.location.href=e:pjax?pjax.loadUrl(e):window.location.href=e}function clickAudio(){var e=document.getElementById("SAOClick");e&&e.play()}function imgeAudio(){var e=document.getElementById("SAOImge");e&&e.play()}function LogoffAudio(){var e=document.getElementById("SAOLogoff");e&&e.play()}function LogonAudio(){var e=document.getElementById("SAOLogon");e&&e.play()}function panelAudio(){var e=document.getElementById("SAOPanel");e&&e.play()}function alertAudio(){var e=document.getElementById("SAOAlert");e&&e.play()}function confirmLogout(){setTimeout((function(){window.opener=null,window.open("","_self"),window.close()}),500)}function openLogout(){SAOclose(),document.getElementById("SAO-logout").classList.add("activeLogout")}function cancelLogout(){document.getElementById("SAO-logout").classList.remove("activeLogout")}function UtilsClick(){var e=event.target,t=e.parentElement.querySelector(".menu-list"),n=e.parentElement.querySelector(".user-panel");e.parentElement.querySelector(".active")?(t&&t.className.indexOf("active")>-1&&t.classList.remove("active"),n&&n.className.indexOf("active")>-1&&n.classList.remove("active")):(SAOinit(),t&&t.classList.add("active"),n&&n.classList.add("active"))}function MenusClick(){var e=event.target,t=e.parentElement.querySelector(".menu-child"),n=e.parentElement.parentElement;t&&(t.className.indexOf("active")>-1?t.classList.remove("active"):(Menuinit(n),t.classList.add("active")))}function popMenu(e){SAOinit();var t=document.getElementById("SAOlauncher");t&&t.play(),document.getElementById("SAO-back").style.display="block";var n=document.getElementById("SAO-menu"),o=document.documentElement.clientWidth||document.body.clientWidth,i=document.documentElement.clientHeight||document.body.clientHeight;n.style.display="block";var c=e.clientX,a=e.clientY;return n.style.left=c<230?n.clientWidth/2+230+"px":o-c<320?n.clientWidth/2-320+o+"px":c+n.clientWidth/2+"px",a<n.clientHeight/2+130?n.style.top="130px":i-a<80+n.clientHeight/2?n.style.top=i-n.clientHeight-80+"px":n.style.top=e.clientY-n.clientHeight/2+"px",!1}function openSearch(){document.body.style.cssText="width: 100%;overflow: hidden",document.querySelector("#local-search .search-dialog").style.display="block",document.querySelector("#local-search-input input").focus(),btf.fadeIn(document.getElementById("search-mask"),.5),loadFlag||(search(GLOBAL_CONFIG.localSearch.path),loadFlag=!0),document.addEventListener("keydown",(function e(t){"Escape"===t.code&&(closeSearch(),document.removeEventListener("keydown",e))}))}function openDarkMode(){"light"===("dark"===document.documentElement.getAttribute("data-theme")?"dark":"light")?(activateDarkMode(),saveToLocal.set("theme","dark",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night)):(activateLightMode(),saveToLocal.set("theme","light",2),void 0!==GLOBAL_CONFIG.Snackbar&&btf.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day)),"function"==typeof utterancesTheme&&utterancesTheme(),"function"==typeof changeGiscusTheme&&changeGiscusTheme(),"object"==typeof FB&&window.loadFBComment(),window.DISQUS&&document.getElementById("disqus_thread").children.length&&setTimeout((()=>window.disqusReset()),200),"function"==typeof runMermaid&&window.runMermaid()}function openhideAsideBtn(){const e=document.documentElement.classList;e.contains("hide-aside")?saveToLocal.set("aside-status","show",2)||SnackbarIMGES("你已切换为双栏",2e3):saveToLocal.set("aside-status","hide",2)||SnackbarIMGES("你已切换为单栏",2e3),e.toggle("hide-aside")}function openlive2d(){var e=document.getElementById("waifu-toggle"),t=document.getElementById("waifu").style;"waifu-toggle-active"==e.classList?(SnackbarIMGES("你好，我是Naokuo的小助手！",1e4),e.classList.remove("waifu-toggle-active"),document.getElementById("waifu-times1").classList.remove("waifu-times1-active"),document.getElementById("waifu-daichuli1").classList.remove("waifu-daichuli1-active"),e.getAttribute("first-time")?(loadWidget(config),e.removeAttribute("first-time")):(localStorage.removeItem("waifu-display"),t.display="",setTimeout((()=>{t.bottom=0}),0))):(localStorage.setItem("waifu-display",Date.now()),SnackbarIMGES("愿有一天能与你再次重逢！",1e4),t.bottom="-500px",setTimeout((()=>{t.display="none",document.getElementById("waifu-times1").classList.add("waifu-times1-active"),document.getElementById("waifu-daichuli1").classList.add("waifu-daichuli1-active"),e.classList.add("waifu-toggle-active")}),3e3))}function openReadMode(){const e=document.body,t=document.createElement("button");"read-mode"==e.classList?(SnackbarIMGES("你已关闭阅读模式",2e3),e.classList.remove("read-mode"),t.remove(),t.removeEventListener("click",clickFn)):(SnackbarIMGES("你已打开阅读模式",2e3),e.classList.add("read-mode"),t.type="button",t.className="fas fa-sign-out-alt exit-readmode",e.appendChild(t),t.addEventListener("click",clickFn))}function ToComment(){document.getElementById("post-comment")?window.location.href="#post-comment":linkStart("/comments/")}function openToTop(){btf.scrollToDest(0,500)}function SAOKeepOff(){localStorage.setItem("SAOSwitch","turnOff"),SAOclose()}function SAOSwitch(){"turnOff"===localStorage.getItem("SAOSwitch")?(localStorage.setItem("SAOSwitch","turnOn"),popMenu(event)):SAOKeepOff()}dvMEnu.onmousedown=function(e){xMenu=e.clientX,yMenu=e.clientY,lMenu=dvMEnu.offsetLeft,tMenu=dvMEnu.offsetTop,isDownMEnu=!0,dvMEnu.style.cursor="move"},window.onmousemove=function(e){if(0!=isDownMEnu){var t=e.clientX,n=e.clientY,o=t-(xMenu-lMenu),i=n-(yMenu-tMenu);dvMEnu.style.left=o+"px",dvMEnu.style.top=i+"px"}},dvMEnu.onmouseup=function(){isDownMEnu=!1,dvMEnu.style.cursor="default"},document.addEventListener("click",(function(e){"SAO-back"===e.target.id&&SAOclose()}));